/**
 * @license
 * Cesium - https://github.com/CesiumGS/cesium
 * Version 1.111
 *
 * Copyright 2011-2022 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/CesiumGS/cesium/blob/main/LICENSE.md for full licensing details.
 */

import{a as Ke,b as v}from"./chunk-YPNOAOY4.js";import{a as Jt}from"./chunk-PA54BVTL.js";import"./chunk-CG3JQAX7.js";import{a as ne}from"./chunk-VSVNBI3J.js";import{a as tn}from"./chunk-K36PKEJW.js";import{b as en}from"./chunk-YOLMPEQR.js";import{a as Bt,c as _r,d as rr,f as Ge}from"./chunk-DQETLSQS.js";var rn=_r((nt,Vt)=>{var pt=function(){var T=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(T=T||__filename),function(u){u=u||{};var r=typeof u<"u"?u:{},B,O;r.ready=new Promise(function(e,t){B=e,O=t});var h={},K;for(K in r)r.hasOwnProperty(K)&&(h[K]=r[K]);var G=[],x="./this.program",E=function(e,t){throw t},C=!1,d=!1,V=!1,Y=!1;C=typeof window=="object",d=typeof importScripts=="function",V=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Y=!C&&!V&&!d;var f="";function b(e){return r.locateFile?r.locateFile(e,f):f+e}var z,ie,X,q,g,Me;V?(d?f=Bt("path").dirname(f)+"/":f=__dirname+"/",z=function(t,n){return g||(g=Bt("fs")),Me||(Me=Bt("path")),t=Me.normalize(t),g.readFileSync(t,n?null:"utf8")},X=function(t){var n=z(t,!0);return n.buffer||(n=new Uint8Array(n)),de(n.buffer),n},process.argv.length>1&&(x=process.argv[1].replace(/\\/g,"/")),G=process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof tr))throw e}),process.on("unhandledRejection",ue),E=function(e){process.exit(e)},r.inspect=function(){return"[Emscripten Module object]"}):Y?(typeof read<"u"&&(z=function(t){return read(t)}),X=function(t){var n;return typeof readbuffer=="function"?new Uint8Array(readbuffer(t)):(n=read(t,"binary"),de(typeof n=="object"),n)},typeof scriptArgs<"u"?G=scriptArgs:typeof arguments<"u"&&(G=arguments),typeof quit=="function"&&(E=function(e){quit(e)}),typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print)):(C||d)&&(d?f=self.location.href:typeof document<"u"&&document.currentScript&&(f=document.currentScript.src),T&&(f=T),f.indexOf("blob:")!==0?f=f.substr(0,f.lastIndexOf("/")+1):f="",z=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},d&&(X=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),ie=function(e,t,n){var _=new XMLHttpRequest;_.open("GET",e,!0),_.responseType="arraybuffer",_.onload=function(){if(_.status==200||_.status==0&&_.response){t(_.response);return}n()},_.onerror=n,_.send(null)},q=function(e){document.title=e});var _t=r.print||console.log.bind(console),Z=r.printErr||console.warn.bind(console);for(K in h)h.hasOwnProperty(K)&&(r[K]=h[K]);h=null,r.arguments&&(G=r.arguments),r.thisProgram&&(x=r.thisProgram),r.quit&&(E=r.quit);var Le=0,me=function(e){Le=e},oe;r.wasmBinary&&(oe=r.wasmBinary);var rt=r.noExitRuntime||!0;typeof WebAssembly!="object"&&ue("no native wasm support detected");var se,Fe=!1,Ee;function de(e,t){e||ue("Assertion failed: "+t)}var be=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function we(e,t,n){for(var _=t+n,i=t;e[i]&&!(i>=_);)++i;if(i-t>16&&e.subarray&&be)return be.decode(e.subarray(t,i));for(var a="";t<i;){var R=e[t++];if(!(R&128)){a+=String.fromCharCode(R);continue}var o=e[t++]&63;if((R&224)==192){a+=String.fromCharCode((R&31)<<6|o);continue}var s=e[t++]&63;if((R&240)==224?R=(R&15)<<12|o<<6|s:R=(R&7)<<18|o<<12|s<<6|e[t++]&63,R<65536)a+=String.fromCharCode(R);else{var c=R-65536;a+=String.fromCharCode(55296|c>>10,56320|c&1023)}}return a}function De(e,t){return e?we(P,e,t):""}function it(e,t,n,_){if(!(_>0))return 0;for(var i=n,a=n+_-1,R=0;R<e.length;++R){var o=e.charCodeAt(R);if(o>=55296&&o<=57343){var s=e.charCodeAt(++R);o=65536+((o&1023)<<10)|s&1023}if(o<=127){if(n>=a)break;t[n++]=o}else if(o<=2047){if(n+1>=a)break;t[n++]=192|o>>6,t[n++]=128|o&63}else if(o<=65535){if(n+2>=a)break;t[n++]=224|o>>12,t[n++]=128|o>>6&63,t[n++]=128|o&63}else{if(n+3>=a)break;t[n++]=240|o>>18,t[n++]=128|o>>12&63,t[n++]=128|o>>6&63,t[n++]=128|o&63}}return t[n]=0,n-i}function U(e,t,n){return it(e,P,t,n)}function H(e){for(var t=0,n=0;n<e.length;++n){var _=e.charCodeAt(n);_>=55296&&_<=57343&&(_=65536+((_&1023)<<10)|e.charCodeAt(++n)&1023),_<=127?++t:_<=2047?t+=2:_<=65535?t+=3:t+=4}return t}var ae=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function ot(e,t){for(var n=e,_=n>>1,i=_+t/2;!(_>=i)&&Be[_];)++_;if(n=_<<1,n-e>32&&ae)return ae.decode(P.subarray(e,n));for(var a="",R=0;!(R>=t/2);++R){var o=Re[e+R*2>>1];if(o==0)break;a+=String.fromCharCode(o)}return a}function Ie(e,t,n){if(n===void 0&&(n=2147483647),n<2)return 0;n-=2;for(var _=t,i=n<e.length*2?n/2:e.length,a=0;a<i;++a){var R=e.charCodeAt(a);Re[t>>1]=R,t+=2}return Re[t>>1]=0,t-_}function cn(e){return e.length*2}function fn(e,t){for(var n=0,_="";!(n>=t/4);){var i=m[e+n*4>>2];if(i==0)break;if(++n,i>=65536){var a=i-65536;_+=String.fromCharCode(55296|a>>10,56320|a&1023)}else _+=String.fromCharCode(i)}return _}function An(e,t,n){if(n===void 0&&(n=2147483647),n<4)return 0;for(var _=t,i=_+n-4,a=0;a<e.length;++a){var R=e.charCodeAt(a);if(R>=55296&&R<=57343){var o=e.charCodeAt(++a);R=65536+((R&1023)<<10)|o&1023}if(m[t>>2]=R,t+=4,t+4>i)break}return m[t>>2]=0,t-_}function un(e){for(var t=0,n=0;n<e.length;++n){var _=e.charCodeAt(n);_>=55296&&_<=57343&&++n,t+=4}return t}function Tn(e,t){return e%t>0&&(e+=t-e%t),e}var st,xe,P,Re,Be,m,k,vt,St;function ht(e){st=e,r.HEAP8=xe=new Int8Array(e),r.HEAP16=Re=new Int16Array(e),r.HEAP32=m=new Int32Array(e),r.HEAPU8=P=new Uint8Array(e),r.HEAPU16=Be=new Uint16Array(e),r.HEAPU32=k=new Uint32Array(e),r.HEAPF32=vt=new Float32Array(e),r.HEAPF64=St=new Float64Array(e)}var fr=r.INITIAL_MEMORY||16777216,Ce,yt=[],gt=[],On=[],Ut=[],ln=!1;function Kn(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Bn(r.preRun.shift());Xe(yt)}function Mn(){ln=!0,Xe(gt)}function Fn(){Xe(On)}function dn(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)pn(r.postRun.shift());Xe(Ut)}function Bn(e){yt.unshift(e)}function Cn(e){gt.unshift(e)}function pn(e){Ut.unshift(e)}var ce=0,at=null,pe=null;function Vn(e){ce++,r.monitorRunDependencies&&r.monitorRunDependencies(ce)}function vn(e){if(ce--,r.monitorRunDependencies&&r.monitorRunDependencies(ce),ce==0&&(at!==null&&(clearInterval(at),at=null),pe)){var t=pe;pe=null,t()}}r.preloadedImages={},r.preloadedAudios={};function ue(e){r.onAbort&&r.onAbort(e),e+="",Z(e),Fe=!0,Ee=1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw O(t),t}function Gt(e,t){return String.prototype.startsWith?e.startsWith(t):e.indexOf(t)===0}var Sn="data:application/octet-stream;base64,";function Pt(e){return Gt(e,Sn)}var hn="file://";function Nt(e){return Gt(e,hn)}var w="basis_transcoder.wasm";Pt(w)||(w=b(w));function Lt(e){try{if(e==w&&oe)return new Uint8Array(oe);if(X)return X(e);throw"both async and sync fetching of the wasm failed"}catch(t){ue(t)}}function yn(){if(!oe&&(C||d)){if(typeof fetch=="function"&&!Nt(w))return fetch(w,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+w+"'";return e.arrayBuffer()}).catch(function(){return Lt(w)});if(ie)return new Promise(function(e,t){ie(w,function(n){e(new Uint8Array(n))},t)})}return Promise.resolve().then(function(){return Lt(w)})}function gn(){var e={a:Z_};function t(R,o){var s=R.exports;r.asm=s,se=r.asm.K,ht(se.buffer),Ce=r.asm.O,Cn(r.asm.L),vn("wasm-instantiate")}Vn("wasm-instantiate");function n(R){t(R.instance)}function _(R){return yn().then(function(o){var s=WebAssembly.instantiate(o,e);return s}).then(R,function(o){Z("failed to asynchronously prepare wasm: "+o),ue(o)})}function i(){return!oe&&typeof WebAssembly.instantiateStreaming=="function"&&!Pt(w)&&!Nt(w)&&typeof fetch=="function"?fetch(w,{credentials:"same-origin"}).then(function(R){var o=WebAssembly.instantiateStreaming(R,e);return o.then(n,function(s){return Z("wasm streaming compile failed: "+s),Z("falling back to ArrayBuffer instantiation"),_(n)})}):_(n)}if(r.instantiateWasm)try{var a=r.instantiateWasm(e,t);return a}catch(R){return Z("Module.instantiateWasm callback failed with error: "+R),!1}return i().catch(O),{}}function Xe(e){for(;e.length>0;){var t=e.shift();if(typeof t=="function"){t(r);continue}var n=t.func;typeof n=="number"?t.arg===void 0?Ce.get(n)():Ce.get(n)(t.arg):n(t.arg===void 0?null:t.arg)}}var He={};function $e(e){for(;e.length;){var t=e.pop(),n=e.pop();n(t)}}function Ve(e){return this.fromWireType(k[e>>2])}var Te={},fe={},ke={},Un=48,Gn=57;function We(e){if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Un&&t<=Gn?"_"+e:e}function je(e,t){return e=We(e),new Function("body","return function "+e+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(t)}function Rt(e,t){var n=je(t,function(_){this.name=t,this.message=_;var i=new Error(_).stack;i!==void 0&&(this.stack=this.toString()+`
`+i.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},n}var mt=void 0;function Ye(e){throw new mt(e)}function _e(e,t,n){e.forEach(function(o){ke[o]=t});function _(o){var s=n(o);s.length!==e.length&&Ye("Mismatched type converter count");for(var c=0;c<e.length;++c)W(e[c],s[c])}var i=new Array(t.length),a=[],R=0;t.forEach(function(o,s){fe.hasOwnProperty(o)?i[s]=fe[o]:(a.push(o),Te.hasOwnProperty(o)||(Te[o]=[]),Te[o].push(function(){i[s]=fe[o],++R,R===a.length&&_(i)}))}),a.length===0&&_(i)}function Pn(e){var t=He[e];delete He[e];var n=t.rawConstructor,_=t.rawDestructor,i=t.fields,a=i.map(function(R){return R.getterReturnType}).concat(i.map(function(R){return R.setterArgumentType}));_e([e],a,function(R){var o={};return i.forEach(function(s,c){var A=s.fieldName,l=R[c],F=s.getter,p=s.getterContext,y=R[c+i.length],N=s.setter,I=s.setterContext;o[A]={read:function(j){return l.fromWireType(F(p,j))},write:function(j,Ue){var te=[];N(I,j,y.toWireType(te,Ue)),$e(te)}}}),[{name:t.name,fromWireType:function(s){var c={};for(var A in o)c[A]=o[A].read(s);return _(s),c},toWireType:function(s,c){for(var A in o)if(!(A in c))throw new TypeError('Missing field:  "'+A+'"');var l=n();for(A in o)o[A].write(l,c[A]);return s!==null&&s.push(_,l),l},argPackAdvance:8,readValueFromPointer:Ve,destructorFunction:_}]})}function ze(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function Nn(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);Et=e}var Et=void 0;function S(e){for(var t="",n=e;P[n];)t+=Et[P[n++]];return t}var Oe=void 0;function M(e){throw new Oe(e)}function W(e,t,n){if(n=n||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var _=t.name;if(e||M('type "'+_+'" must have a positive integer typeid pointer'),fe.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;M("Cannot register type '"+_+"' twice")}if(fe[e]=t,delete ke[e],Te.hasOwnProperty(e)){var i=Te[e];delete Te[e],i.forEach(function(a){a()})}}function Ln(e,t,n,_,i){var a=ze(n);t=S(t),W(e,{name:t,fromWireType:function(R){return!!R},toWireType:function(R,o){return o?_:i},argPackAdvance:8,readValueFromPointer:function(R){var o;if(n===1)o=xe;else if(n===2)o=Re;else if(n===4)o=m;else throw new TypeError("Unknown boolean type size: "+t);return this.fromWireType(o[R>>a])},destructorFunction:null})}function mn(e){if(!(this instanceof re)||!(e instanceof re))return!1;for(var t=this.$$.ptrType.registeredClass,n=this.$$.ptr,_=e.$$.ptrType.registeredClass,i=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;_.baseClass;)i=_.upcast(i),_=_.baseClass;return t===_&&n===i}function En(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function ct(e){function t(n){return n.$$.ptrType.registeredClass.name}M(t(e)+" instance already deleted")}var ft=!1;function bt(e){}function bn(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}function wt(e){e.count.value-=1;var t=e.count.value===0;t&&bn(e)}function ve(e){return typeof FinalizationGroup>"u"?(ve=function(t){return t},e):(ft=new FinalizationGroup(function(t){for(var n=t.next();!n.done;n=t.next()){var _=n.value;_.ptr?wt(_):console.warn("object already deleted: "+_.ptr)}}),ve=function(t){return ft.register(t,t.$$,t.$$),t},bt=function(t){ft.unregister(t.$$)},ve(e))}function wn(){if(this.$$.ptr||ct(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=ve(Object.create(Object.getPrototypeOf(this),{$$:{value:En(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function Dn(){this.$$.ptr||ct(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&M("Object already scheduled for deletion"),bt(this),wt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function In(){return!this.$$.ptr}var Se=void 0,he=[];function At(){for(;he.length;){var e=he.pop();e.$$.deleteScheduled=!1,e.delete()}}function xn(){return this.$$.ptr||ct(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&M("Object already scheduled for deletion"),he.push(this),he.length===1&&Se&&Se(At),this.$$.deleteScheduled=!0,this}function Xn(){re.prototype.isAliasOf=mn,re.prototype.clone=wn,re.prototype.delete=Dn,re.prototype.isDeleted=In,re.prototype.deleteLater=xn}function re(){}var Dt={};function It(e,t,n){if(e[t].overloadTable===void 0){var _=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||M("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[_.argCount]=_}}function ut(e,t,n){r.hasOwnProperty(e)?((n===void 0||r[e].overloadTable!==void 0&&r[e].overloadTable[n]!==void 0)&&M("Cannot register public name '"+e+"' twice"),It(r,e,e),r.hasOwnProperty(n)&&M("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),r[e].overloadTable[n]=t):(r[e]=t,n!==void 0&&(r[e].numArguments=n))}function Hn(e,t,n,_,i,a,R,o){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=_,this.baseClass=i,this.getActualType=a,this.upcast=R,this.downcast=o,this.pureVirtualFunctions=[]}function Tt(e,t,n){for(;t!==n;)t.upcast||M("Expected null or instance of "+n.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function $n(e,t){if(t===null)return this.isReference&&M("null is not a valid "+this.name),0;t.$$||M('Cannot pass "'+le(t)+'" as a '+this.name),t.$$.ptr||M("Cannot pass deleted object as a pointer of type "+this.name);var n=t.$$.ptrType.registeredClass,_=Tt(t.$$.ptr,n,this.registeredClass);return _}function kn(e,t){var n;if(t===null)return this.isReference&&M("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,n),n):0;t.$$||M('Cannot pass "'+le(t)+'" as a '+this.name),t.$$.ptr||M("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&M("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var _=t.$$.ptrType.registeredClass;if(n=Tt(t.$$.ptr,_,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&M("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:M("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var i=t.clone();n=this.rawShare(n,J(function(){i.delete()})),e!==null&&e.push(this.rawDestructor,n)}break;default:M("Unsupporting sharing policy")}return n}function Wn(e,t){if(t===null)return this.isReference&&M("null is not a valid "+this.name),0;t.$$||M('Cannot pass "'+le(t)+'" as a '+this.name),t.$$.ptr||M("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&M("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass,_=Tt(t.$$.ptr,n,this.registeredClass);return _}function jn(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function Yn(e){this.rawDestructor&&this.rawDestructor(e)}function zn(e){e!==null&&e.delete()}function xt(e,t,n){if(t===n)return e;if(n.baseClass===void 0)return null;var _=xt(e,t,n.baseClass);return _===null?null:n.downcast(_)}function qn(){return Object.keys(ye).length}function Zn(){var e=[];for(var t in ye)ye.hasOwnProperty(t)&&e.push(ye[t]);return e}function Qn(e){Se=e,he.length&&Se&&Se(At)}function Jn(){r.getInheritedInstanceCount=qn,r.getLiveInheritedInstances=Zn,r.flushPendingDeletes=At,r.setDelayFunction=Qn}var ye={};function e_(e,t){for(t===void 0&&M("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}function t_(e,t){return t=e_(e,t),ye[t]}function qe(e,t){(!t.ptrType||!t.ptr)&&Ye("makeClassHandle requires ptr and ptrType");var n=!!t.smartPtrType,_=!!t.smartPtr;return n!==_&&Ye("Both smartPtrType and smartPtr must be specified"),t.count={value:1},ve(Object.create(e,{$$:{value:t}}))}function n_(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=t_(this.registeredClass,t);if(n!==void 0){if(n.$$.count.value===0)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var _=n.clone();return this.destructor(e),_}function i(){return this.isSmartPointer?qe(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):qe(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var a=this.registeredClass.getActualType(t),R=Dt[a];if(!R)return i.call(this);var o;this.isConst?o=R.constPointerType:o=R.pointerType;var s=xt(t,this.registeredClass,o.registeredClass);return s===null?i.call(this):this.isSmartPointer?qe(o.registeredClass.instancePrototype,{ptrType:o,ptr:s,smartPtrType:this,smartPtr:e}):qe(o.registeredClass.instancePrototype,{ptrType:o,ptr:s})}function __(){Q.prototype.getPointee=jn,Q.prototype.destructor=Yn,Q.prototype.argPackAdvance=8,Q.prototype.readValueFromPointer=Ve,Q.prototype.deleteObject=zn,Q.prototype.fromWireType=n_}function Q(e,t,n,_,i,a,R,o,s,c,A){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=_,this.isSmartPointer=i,this.pointeeType=a,this.sharingPolicy=R,this.rawGetPointee=o,this.rawConstructor=s,this.rawShare=c,this.rawDestructor=A,!i&&t.baseClass===void 0?_?(this.toWireType=$n,this.destructorFunction=null):(this.toWireType=Wn,this.destructorFunction=null):this.toWireType=kn}function Xt(e,t,n){r.hasOwnProperty(e)||Ye("Replacing nonexistant public symbol"),r[e].overloadTable!==void 0&&n!==void 0?r[e].overloadTable[n]=t:(r[e]=t,r[e].argCount=n)}function r_(e,t,n){var _=r["dynCall_"+e];return n&&n.length?_.apply(null,[t].concat(n)):_.call(null,t)}function i_(e,t,n){return e.indexOf("j")!=-1?r_(e,t,n):Ce.get(t).apply(null,n)}function o_(e,t){var n=[];return function(){n.length=arguments.length;for(var _=0;_<arguments.length;_++)n[_]=arguments[_];return i_(e,t,n)}}function $(e,t){e=S(e);function n(){return e.indexOf("j")!=-1?o_(e,t):Ce.get(t)}var _=n();return typeof _!="function"&&M("unknown function pointer with signature "+e+": "+t),_}var Ht=void 0;function $t(e){var t=zt(e),n=S(t);return ee(t),n}function Ze(e,t){var n=[],_={};function i(a){if(!_[a]&&!fe[a]){if(ke[a]){ke[a].forEach(i);return}n.push(a),_[a]=!0}}throw t.forEach(i),new Ht(e+": "+n.map($t).join([", "]))}function s_(e,t,n,_,i,a,R,o,s,c,A,l,F){A=S(A),a=$(i,a),o&&(o=$(R,o)),c&&(c=$(s,c)),F=$(l,F);var p=We(A);ut(p,function(){Ze("Cannot construct "+A+" due to unbound types",[_])}),_e([e,t,n],_?[_]:[],function(y){y=y[0];var N,I;_?(N=y.registeredClass,I=N.instancePrototype):I=re.prototype;var j=je(p,function(){if(Object.getPrototypeOf(this)!==Ue)throw new Oe("Use 'new' to construct "+A);if(te.constructor_body===void 0)throw new Oe(A+" has no accessible constructor");var Qt=te.constructor_body[arguments.length];if(Qt===void 0)throw new Oe("Tried to invoke ctor of "+A+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(te.constructor_body).toString()+") parameters instead!");return Qt.apply(this,arguments)}),Ue=Object.create(I,{constructor:{value:j}});j.prototype=Ue;var te=new Hn(A,j,Ue,F,N,a,o,c),nr=new Q(A,te,!0,!1,!1),qt=new Q(A+"*",te,!1,!1,!1),Zt=new Q(A+" const*",te,!1,!0,!1);return Dt[e]={pointerType:qt,constPointerType:Zt},Xt(p,j),[nr,qt,Zt]})}function Ot(e,t){for(var n=[],_=0;_<e;_++)n.push(m[(t>>2)+_]);return n}function a_(e,t,n,_,i,a){de(t>0);var R=Ot(t,n);i=$(_,i);var o=[a],s=[];_e([],[e],function(c){c=c[0];var A="constructor "+c.name;if(c.registeredClass.constructor_body===void 0&&(c.registeredClass.constructor_body=[]),c.registeredClass.constructor_body[t-1]!==void 0)throw new Oe("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+c.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return c.registeredClass.constructor_body[t-1]=function(){Ze("Cannot construct "+c.name+" due to unbound types",R)},_e([],R,function(l){return c.registeredClass.constructor_body[t-1]=function(){arguments.length!==t-1&&M(A+" called with "+arguments.length+" arguments, expected "+(t-1)),s.length=0,o.length=t;for(var p=1;p<t;++p)o[p]=l[p].toWireType(s,arguments[p-1]);var y=i.apply(null,o);return $e(s),l[0].fromWireType(y)},[]}),[]})}function kt(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var n=je(e.name||"unknownFunctionName",function(){});n.prototype=e.prototype;var _=new n,i=e.apply(_,t);return i instanceof Object?i:_}function Wt(e,t,n,_,i){var a=t.length;a<2&&M("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var R=t[1]!==null&&n!==null,o=!1,s=1;s<t.length;++s)if(t[s]!==null&&t[s].destructorFunction===void 0){o=!0;break}for(var c=t[0].name!=="void",A="",l="",s=0;s<a-2;++s)A+=(s!==0?", ":"")+"arg"+s,l+=(s!==0?", ":"")+"arg"+s+"Wired";var F="return function "+We(e)+"("+A+`) {
if (arguments.length !== `+(a-2)+`) {
throwBindingError('function `+e+" called with ' + arguments.length + ' arguments, expected "+(a-2)+` args!');
}
`;o&&(F+=`var destructors = [];
`);var p=o?"destructors":"null",y=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],N=[M,_,i,$e,t[0],t[1]];R&&(F+="var thisWired = classParam.toWireType("+p+`, this);
`);for(var s=0;s<a-2;++s)F+="var arg"+s+"Wired = argType"+s+".toWireType("+p+", arg"+s+"); // "+t[s+2].name+`
`,y.push("argType"+s),N.push(t[s+2]);if(R&&(l="thisWired"+(l.length>0?", ":"")+l),F+=(c?"var rv = ":"")+"invoker(fn"+(l.length>0?", ":"")+l+`);
`,o)F+=`runDestructors(destructors);
`;else for(var s=R?1:2;s<t.length;++s){var I=s===1?"thisWired":"arg"+(s-2)+"Wired";t[s].destructorFunction!==null&&(F+=I+"_dtor("+I+"); // "+t[s].name+`
`,y.push(I+"_dtor"),N.push(t[s].destructorFunction))}c&&(F+=`var ret = retType.fromWireType(rv);
return ret;
`),F+=`}
`,y.push(F);var j=kt(Function,y).apply(null,N);return j}function R_(e,t,n,_,i,a,R,o){var s=Ot(n,_);t=S(t),a=$(i,a),_e([],[e],function(c){c=c[0];var A=c.name+"."+t;o&&c.registeredClass.pureVirtualFunctions.push(t);function l(){Ze("Cannot call "+A+" due to unbound types",s)}var F=c.registeredClass.instancePrototype,p=F[t];return p===void 0||p.overloadTable===void 0&&p.className!==c.name&&p.argCount===n-2?(l.argCount=n-2,l.className=c.name,F[t]=l):(It(F,t,A),F[t].overloadTable[n-2]=l),_e([],s,function(y){var N=Wt(A,y,c,a,R);return F[t].overloadTable===void 0?(N.argCount=n-2,F[t]=N):F[t].overloadTable[n-2]=N,[]}),[]})}function c_(e,t,n){e=S(e),_e([],[t],function(_){return _=_[0],r[e]=_.fromWireType(n),[]})}var lt=[],D=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Kt(e){e>4&&--D[e].refcount===0&&(D[e]=void 0,lt.push(e))}function f_(){for(var e=0,t=5;t<D.length;++t)D[t]!==void 0&&++e;return e}function A_(){for(var e=5;e<D.length;++e)if(D[e]!==void 0)return D[e];return null}function u_(){r.count_emval_handles=f_,r.get_first_emval=A_}function J(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var t=lt.length?lt.pop():D.length;return D[t]={refcount:1,value:e},t}}}function T_(e,t){t=S(t),W(e,{name:t,fromWireType:function(n){var _=D[n].value;return Kt(n),_},toWireType:function(n,_){return J(_)},argPackAdvance:8,readValueFromPointer:Ve,destructorFunction:null})}function O_(e,t,n){switch(t){case 0:return function(_){var i=n?xe:P;return this.fromWireType(i[_])};case 1:return function(_){var i=n?Re:Be;return this.fromWireType(i[_>>1])};case 2:return function(_){var i=n?m:k;return this.fromWireType(i[_>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function l_(e,t,n,_){var i=ze(n);t=S(t);function a(){}a.values={},W(e,{name:t,constructor:a,fromWireType:function(R){return this.constructor.values[R]},toWireType:function(R,o){return o.value},argPackAdvance:8,readValueFromPointer:O_(t,i,_),destructorFunction:null}),ut(t,a)}function Qe(e,t){var n=fe[e];return n===void 0&&M(t+" has unknown type "+$t(e)),n}function K_(e,t,n){var _=Qe(e,"enum");t=S(t);var i=_.constructor,a=Object.create(_.constructor.prototype,{value:{value:n},constructor:{value:je(_.name+"_"+t,function(){})}});i.values[n]=a,i[t]=a}function le(e){if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e}function M_(e,t){switch(t){case 2:return function(n){return this.fromWireType(vt[n>>2])};case 3:return function(n){return this.fromWireType(St[n>>3])};default:throw new TypeError("Unknown float type: "+e)}}function F_(e,t,n){var _=ze(n);t=S(t),W(e,{name:t,fromWireType:function(i){return i},toWireType:function(i,a){if(typeof a!="number"&&typeof a!="boolean")throw new TypeError('Cannot convert "'+le(a)+'" to '+this.name);return a},argPackAdvance:8,readValueFromPointer:M_(t,_),destructorFunction:null})}function d_(e,t,n,_,i,a){var R=Ot(t,n);e=S(e),i=$(_,i),ut(e,function(){Ze("Cannot call "+e+" due to unbound types",R)},t-1),_e([],R,function(o){var s=[o[0],null].concat(o.slice(1));return Xt(e,Wt(e,s,null,i,a),t-1),[]})}function B_(e,t,n){switch(t){case 0:return n?function(i){return xe[i]}:function(i){return P[i]};case 1:return n?function(i){return Re[i>>1]}:function(i){return Be[i>>1]};case 2:return n?function(i){return m[i>>2]}:function(i){return k[i>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function C_(e,t,n,_,i){t=S(t),i===-1&&(i=4294967295);var a=ze(n),R=function(c){return c};if(_===0){var o=32-8*n;R=function(c){return c<<o>>>o}}var s=t.indexOf("unsigned")!=-1;W(e,{name:t,fromWireType:R,toWireType:function(c,A){if(typeof A!="number"&&typeof A!="boolean")throw new TypeError('Cannot convert "'+le(A)+'" to '+this.name);if(A<_||A>i)throw new TypeError('Passing a number "'+le(A)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+_+", "+i+"]!");return s?A>>>0:A|0},argPackAdvance:8,readValueFromPointer:B_(t,a,_!==0),destructorFunction:null})}function p_(e,t,n){var _=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],i=_[t];function a(R){R=R>>2;var o=k,s=o[R],c=o[R+1];return new i(st,c,s)}n=S(n),W(e,{name:n,fromWireType:a,argPackAdvance:8,readValueFromPointer:a},{ignoreDuplicateRegistrations:!0})}function V_(e,t){t=S(t);var n=t==="std::string";W(e,{name:t,fromWireType:function(_){var i=k[_>>2],a;if(n)for(var R=_+4,o=0;o<=i;++o){var s=_+4+o;if(o==i||P[s]==0){var c=s-R,A=De(R,c);a===void 0?a=A:(a+=String.fromCharCode(0),a+=A),R=s+1}}else{for(var l=new Array(i),o=0;o<i;++o)l[o]=String.fromCharCode(P[_+4+o]);a=l.join("")}return ee(_),a},toWireType:function(_,i){i instanceof ArrayBuffer&&(i=new Uint8Array(i));var a,R=typeof i=="string";R||i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Int8Array||M("Cannot pass non-string to std::string"),n&&R?a=function(){return H(i)}:a=function(){return i.length};var o=a(),s=Ft(4+o+1);if(k[s>>2]=o,n&&R)U(i,s+4,o+1);else if(R)for(var c=0;c<o;++c){var A=i.charCodeAt(c);A>255&&(ee(s),M("String has UTF-16 code units that do not fit in 8 bits")),P[s+4+c]=A}else for(var c=0;c<o;++c)P[s+4+c]=i[c];return _!==null&&_.push(ee,s),s},argPackAdvance:8,readValueFromPointer:Ve,destructorFunction:function(_){ee(_)}})}function v_(e,t,n){n=S(n);var _,i,a,R,o;t===2?(_=ot,i=Ie,R=cn,a=function(){return Be},o=1):t===4&&(_=fn,i=An,R=un,a=function(){return k},o=2),W(e,{name:n,fromWireType:function(s){for(var c=k[s>>2],A=a(),l,F=s+4,p=0;p<=c;++p){var y=s+4+p*t;if(p==c||A[y>>o]==0){var N=y-F,I=_(F,N);l===void 0?l=I:(l+=String.fromCharCode(0),l+=I),F=y+t}}return ee(s),l},toWireType:function(s,c){typeof c!="string"&&M("Cannot pass non-string to C++ string type "+n);var A=R(c),l=Ft(4+A+t);return k[l>>2]=A>>o,i(c,l+4,A+t),s!==null&&s.push(ee,l),l},argPackAdvance:8,readValueFromPointer:Ve,destructorFunction:function(s){ee(s)}})}function S_(e,t,n,_,i,a){He[e]={name:S(t),rawConstructor:$(n,_),rawDestructor:$(i,a),fields:[]}}function h_(e,t,n,_,i,a,R,o,s,c){He[e].fields.push({fieldName:S(t),getterReturnType:n,getter:$(_,i),getterContext:a,setterArgumentType:R,setter:$(o,s),setterContext:c})}function y_(e,t){t=S(t),W(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(n,_){}})}function ge(e){return e||M("Cannot use deleted val. handle = "+e),D[e].value}function g_(e,t,n){e=ge(e),t=Qe(t,"emval::as");var _=[],i=J(_);return m[n>>2]=i,t.toWireType(_,e)}var U_={};function Je(e){var t=U_[e];return t===void 0?S(e):t}var Mt=[];function G_(e,t,n,_){e=Mt[e],t=ge(t),n=Je(n),e(t,n,null,_)}function jt(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function P_(e){return e===0?J(jt()):(e=Je(e),J(jt()[e]))}function N_(e){var t=Mt.length;return Mt.push(e),t}function L_(e,t){for(var n=new Array(e),_=0;_<e;++_)n[_]=Qe(m[(t>>2)+_],"parameter "+_);return n}function m_(e,t){for(var n=L_(e,t),_=n[0],i=_.name+"_$"+n.slice(1).map(function(p){return p.name}).join("_")+"$",a=["retType"],R=[_],o="",s=0;s<e-1;++s)o+=(s!==0?", ":"")+"arg"+s,a.push("argType"+s),R.push(n[1+s]);for(var c=We("methodCaller_"+i),A="return function "+c+`(handle, name, destructors, args) {
`,l=0,s=0;s<e-1;++s)A+="    var arg"+s+" = argType"+s+".readValueFromPointer(args"+(l?"+"+l:"")+`);
`,l+=n[s+1].argPackAdvance;A+="    var rv = handle[name]("+o+`);
`;for(var s=0;s<e-1;++s)n[s+1].deleteObject&&(A+="    argType"+s+".deleteObject(arg"+s+`);
`);_.isVoid||(A+=`    return retType.toWireType(destructors, rv);
`),A+=`};
`,a.push(A);var F=kt(Function,a).apply(null,R);return N_(F)}function E_(e){return e=Je(e),J(r[e])}function b_(e,t){return e=ge(e),t=ge(t),J(e[t])}function w_(e){e>4&&(D[e].refcount+=1)}function D_(e){for(var t="",n=0;n<e;++n)t+=(n!==0?", ":"")+"arg"+n;for(var _="return function emval_allocator_"+e+`(constructor, argTypes, args) {
`,n=0;n<e;++n)_+="var argType"+n+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+n+'], "parameter '+n+`");
var arg`+n+" = argType"+n+`.readValueFromPointer(args);
args += argType`+n+`['argPackAdvance'];
`;return _+="var obj = new constructor("+t+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",_)(Qe,r,J)}var Yt={};function I_(e,t,n,_){e=ge(e);var i=Yt[t];return i||(i=D_(t),Yt[t]=i),i(e,n,_)}function x_(e){return J(Je(e))}function X_(e){var t=D[e].value;$e(t),Kt(e)}function H_(){ue()}function $_(e,t,n){P.copyWithin(e,t,t+n)}function k_(e){try{return se.grow(e-st.byteLength+65535>>>16),ht(se.buffer),1}catch{}}function W_(e){var t=P.length;e=e>>>0;var n=2147483648;if(e>n)return!1;for(var _=1;_<=4;_*=2){var i=t*(1+.2/_);i=Math.min(i,e+100663296);var a=Math.min(n,Tn(Math.max(e,i),65536)),R=k_(a);if(R)return!0}return!1}var et={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=et.buffers[e];t===0||t===10?((e===1?_t:Z)(we(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){et.varargs+=4;var e=m[et.varargs-4>>2];return e},getStr:function(e){var t=De(e);return t},get64:function(e,t){return e}};function j_(e){return 0}function Y_(e,t,n,_,i){}function z_(e,t,n,_){for(var i=0,a=0;a<n;a++){for(var R=m[t+a*8>>2],o=m[t+(a*8+4)>>2],s=0;s<o;s++)et.printChar(e,P[R+s]);i+=o}return m[_>>2]=i,0}function q_(e){me(e|0)}mt=r.InternalError=Rt(Error,"InternalError"),Nn(),Oe=r.BindingError=Rt(Error,"BindingError"),Xn(),__(),Jn(),Ht=r.UnboundTypeError=Rt(Error,"UnboundTypeError"),u_();var Z_={t:Pn,I:Ln,x:s_,w:a_,d:R_,k:c_,H:T_,n:l_,a:K_,A:F_,i:d_,j:C_,h:p_,B:V_,v:v_,u:S_,c:h_,J:y_,m:g_,s:G_,b:Kt,y:P_,p:m_,r:E_,e:b_,g:w_,q:I_,f:x_,l:X_,o:H_,E:$_,F:W_,G:j_,C:Y_,z:z_,D:q_},Ar=gn(),Q_=r.___wasm_call_ctors=function(){return(Q_=r.___wasm_call_ctors=r.asm.L).apply(null,arguments)},Ft=r._malloc=function(){return(Ft=r._malloc=r.asm.M).apply(null,arguments)},ee=r._free=function(){return(ee=r._free=r.asm.N).apply(null,arguments)},zt=r.___getTypeName=function(){return(zt=r.___getTypeName=r.asm.P).apply(null,arguments)},J_=r.___embind_register_native_and_builtin_types=function(){return(J_=r.___embind_register_native_and_builtin_types=r.asm.Q).apply(null,arguments)},er=r.dynCall_jiji=function(){return(er=r.dynCall_jiji=r.asm.R).apply(null,arguments)},tt;function tr(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}pe=function e(){tt||dt(),tt||(pe=e)};function dt(e){if(e=e||G,ce>0||(Kn(),ce>0))return;function t(){tt||(tt=!0,r.calledRun=!0,!Fe&&(Mn(),Fn(),B(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),dn()))}r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),t()},1)):t()}if(r.run=dt,r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return dt(),u.ready}}();typeof nt=="object"&&typeof Vt=="object"?Vt.exports=pt:typeof define=="function"&&define.amd?define([],function(){return pt}):typeof nt=="object"&&(nt.BASIS=pt)});var ir={VK_FORMAT_UNDEFINED:0,VK_FORMAT_R4G4_UNORM_PACK8:1,VK_FORMAT_R4G4B4A4_UNORM_PACK16:2,VK_FORMAT_B4G4R4A4_UNORM_PACK16:3,VK_FORMAT_R5G6B5_UNORM_PACK16:4,VK_FORMAT_B5G6R5_UNORM_PACK16:5,VK_FORMAT_R5G5B5A1_UNORM_PACK16:6,VK_FORMAT_B5G5R5A1_UNORM_PACK16:7,VK_FORMAT_A1R5G5B5_UNORM_PACK16:8,VK_FORMAT_R8_UNORM:9,VK_FORMAT_R8_SNORM:10,VK_FORMAT_R8_USCALED:11,VK_FORMAT_R8_SSCALED:12,VK_FORMAT_R8_UINT:13,VK_FORMAT_R8_SINT:14,VK_FORMAT_R8_SRGB:15,VK_FORMAT_R8G8_UNORM:16,VK_FORMAT_R8G8_SNORM:17,VK_FORMAT_R8G8_USCALED:18,VK_FORMAT_R8G8_SSCALED:19,VK_FORMAT_R8G8_UINT:20,VK_FORMAT_R8G8_SINT:21,VK_FORMAT_R8G8_SRGB:22,VK_FORMAT_R8G8B8_UNORM:23,VK_FORMAT_R8G8B8_SNORM:24,VK_FORMAT_R8G8B8_USCALED:25,VK_FORMAT_R8G8B8_SSCALED:26,VK_FORMAT_R8G8B8_UINT:27,VK_FORMAT_R8G8B8_SINT:28,VK_FORMAT_R8G8B8_SRGB:29,VK_FORMAT_B8G8R8_UNORM:30,VK_FORMAT_B8G8R8_SNORM:31,VK_FORMAT_B8G8R8_USCALED:32,VK_FORMAT_B8G8R8_SSCALED:33,VK_FORMAT_B8G8R8_UINT:34,VK_FORMAT_B8G8R8_SINT:35,VK_FORMAT_B8G8R8_SRGB:36,VK_FORMAT_R8G8B8A8_UNORM:37,VK_FORMAT_R8G8B8A8_SNORM:38,VK_FORMAT_R8G8B8A8_USCALED:39,VK_FORMAT_R8G8B8A8_SSCALED:40,VK_FORMAT_R8G8B8A8_UINT:41,VK_FORMAT_R8G8B8A8_SINT:42,VK_FORMAT_R8G8B8A8_SRGB:43,VK_FORMAT_B8G8R8A8_UNORM:44,VK_FORMAT_B8G8R8A8_SNORM:45,VK_FORMAT_B8G8R8A8_USCALED:46,VK_FORMAT_B8G8R8A8_SSCALED:47,VK_FORMAT_B8G8R8A8_UINT:48,VK_FORMAT_B8G8R8A8_SINT:49,VK_FORMAT_B8G8R8A8_SRGB:50,VK_FORMAT_A8B8G8R8_UNORM_PACK32:51,VK_FORMAT_A8B8G8R8_SNORM_PACK32:52,VK_FORMAT_A8B8G8R8_USCALED_PACK32:53,VK_FORMAT_A8B8G8R8_SSCALED_PACK32:54,VK_FORMAT_A8B8G8R8_UINT_PACK32:55,VK_FORMAT_A8B8G8R8_SINT_PACK32:56,VK_FORMAT_A8B8G8R8_SRGB_PACK32:57,VK_FORMAT_A2R10G10B10_UNORM_PACK32:58,VK_FORMAT_A2R10G10B10_SNORM_PACK32:59,VK_FORMAT_A2R10G10B10_USCALED_PACK32:60,VK_FORMAT_A2R10G10B10_SSCALED_PACK32:61,VK_FORMAT_A2R10G10B10_UINT_PACK32:62,VK_FORMAT_A2R10G10B10_SINT_PACK32:63,VK_FORMAT_A2B10G10R10_UNORM_PACK32:64,VK_FORMAT_A2B10G10R10_SNORM_PACK32:65,VK_FORMAT_A2B10G10R10_USCALED_PACK32:66,VK_FORMAT_A2B10G10R10_SSCALED_PACK32:67,VK_FORMAT_A2B10G10R10_UINT_PACK32:68,VK_FORMAT_A2B10G10R10_SINT_PACK32:69,VK_FORMAT_R16_UNORM:70,VK_FORMAT_R16_SNORM:71,VK_FORMAT_R16_USCALED:72,VK_FORMAT_R16_SSCALED:73,VK_FORMAT_R16_UINT:74,VK_FORMAT_R16_SINT:75,VK_FORMAT_R16_SFLOAT:76,VK_FORMAT_R16G16_UNORM:77,VK_FORMAT_R16G16_SNORM:78,VK_FORMAT_R16G16_USCALED:79,VK_FORMAT_R16G16_SSCALED:80,VK_FORMAT_R16G16_UINT:81,VK_FORMAT_R16G16_SINT:82,VK_FORMAT_R16G16_SFLOAT:83,VK_FORMAT_R16G16B16_UNORM:84,VK_FORMAT_R16G16B16_SNORM:85,VK_FORMAT_R16G16B16_USCALED:86,VK_FORMAT_R16G16B16_SSCALED:87,VK_FORMAT_R16G16B16_UINT:88,VK_FORMAT_R16G16B16_SINT:89,VK_FORMAT_R16G16B16_SFLOAT:90,VK_FORMAT_R16G16B16A16_UNORM:91,VK_FORMAT_R16G16B16A16_SNORM:92,VK_FORMAT_R16G16B16A16_USCALED:93,VK_FORMAT_R16G16B16A16_SSCALED:94,VK_FORMAT_R16G16B16A16_UINT:95,VK_FORMAT_R16G16B16A16_SINT:96,VK_FORMAT_R16G16B16A16_SFLOAT:97,VK_FORMAT_R32_UINT:98,VK_FORMAT_R32_SINT:99,VK_FORMAT_R32_SFLOAT:100,VK_FORMAT_R32G32_UINT:101,VK_FORMAT_R32G32_SINT:102,VK_FORMAT_R32G32_SFLOAT:103,VK_FORMAT_R32G32B32_UINT:104,VK_FORMAT_R32G32B32_SINT:105,VK_FORMAT_R32G32B32_SFLOAT:106,VK_FORMAT_R32G32B32A32_UINT:107,VK_FORMAT_R32G32B32A32_SINT:108,VK_FORMAT_R32G32B32A32_SFLOAT:109,VK_FORMAT_R64_UINT:110,VK_FORMAT_R64_SINT:111,VK_FORMAT_R64_SFLOAT:112,VK_FORMAT_R64G64_UINT:113,VK_FORMAT_R64G64_SINT:114,VK_FORMAT_R64G64_SFLOAT:115,VK_FORMAT_R64G64B64_UINT:116,VK_FORMAT_R64G64B64_SINT:117,VK_FORMAT_R64G64B64_SFLOAT:118,VK_FORMAT_R64G64B64A64_UINT:119,VK_FORMAT_R64G64B64A64_SINT:120,VK_FORMAT_R64G64B64A64_SFLOAT:121,VK_FORMAT_B10G11R11_UFLOAT_PACK32:122,VK_FORMAT_E5B9G9R9_UFLOAT_PACK32:123,VK_FORMAT_D16_UNORM:124,VK_FORMAT_X8_D24_UNORM_PACK32:125,VK_FORMAT_D32_SFLOAT:126,VK_FORMAT_S8_UINT:127,VK_FORMAT_D16_UNORM_S8_UINT:128,VK_FORMAT_D24_UNORM_S8_UINT:129,VK_FORMAT_D32_SFLOAT_S8_UINT:130,VK_FORMAT_BC1_RGB_UNORM_BLOCK:131,VK_FORMAT_BC1_RGB_SRGB_BLOCK:132,VK_FORMAT_BC1_RGBA_UNORM_BLOCK:133,VK_FORMAT_BC1_RGBA_SRGB_BLOCK:134,VK_FORMAT_BC2_UNORM_BLOCK:135,VK_FORMAT_BC2_SRGB_BLOCK:136,VK_FORMAT_BC3_UNORM_BLOCK:137,VK_FORMAT_BC3_SRGB_BLOCK:138,VK_FORMAT_BC4_UNORM_BLOCK:139,VK_FORMAT_BC4_SNORM_BLOCK:140,VK_FORMAT_BC5_UNORM_BLOCK:141,VK_FORMAT_BC5_SNORM_BLOCK:142,VK_FORMAT_BC6H_UFLOAT_BLOCK:143,VK_FORMAT_BC6H_SFLOAT_BLOCK:144,VK_FORMAT_BC7_UNORM_BLOCK:145,VK_FORMAT_BC7_SRGB_BLOCK:146,VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK:147,VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK:148,VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK:149,VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK:150,VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK:151,VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK:152,VK_FORMAT_EAC_R11_UNORM_BLOCK:153,VK_FORMAT_EAC_R11_SNORM_BLOCK:154,VK_FORMAT_EAC_R11G11_UNORM_BLOCK:155,VK_FORMAT_EAC_R11G11_SNORM_BLOCK:156,VK_FORMAT_ASTC_4x4_UNORM_BLOCK:157,VK_FORMAT_ASTC_4x4_SRGB_BLOCK:158,VK_FORMAT_ASTC_5x4_UNORM_BLOCK:159,VK_FORMAT_ASTC_5x4_SRGB_BLOCK:160,VK_FORMAT_ASTC_5x5_UNORM_BLOCK:161,VK_FORMAT_ASTC_5x5_SRGB_BLOCK:162,VK_FORMAT_ASTC_6x5_UNORM_BLOCK:163,VK_FORMAT_ASTC_6x5_SRGB_BLOCK:164,VK_FORMAT_ASTC_6x6_UNORM_BLOCK:165,VK_FORMAT_ASTC_6x6_SRGB_BLOCK:166,VK_FORMAT_ASTC_8x5_UNORM_BLOCK:167,VK_FORMAT_ASTC_8x5_SRGB_BLOCK:168,VK_FORMAT_ASTC_8x6_UNORM_BLOCK:169,VK_FORMAT_ASTC_8x6_SRGB_BLOCK:170,VK_FORMAT_ASTC_8x8_UNORM_BLOCK:171,VK_FORMAT_ASTC_8x8_SRGB_BLOCK:172,VK_FORMAT_ASTC_10x5_UNORM_BLOCK:173,VK_FORMAT_ASTC_10x5_SRGB_BLOCK:174,VK_FORMAT_ASTC_10x6_UNORM_BLOCK:175,VK_FORMAT_ASTC_10x6_SRGB_BLOCK:176,VK_FORMAT_ASTC_10x8_UNORM_BLOCK:177,VK_FORMAT_ASTC_10x8_SRGB_BLOCK:178,VK_FORMAT_ASTC_10x10_UNORM_BLOCK:179,VK_FORMAT_ASTC_10x10_SRGB_BLOCK:180,VK_FORMAT_ASTC_12x10_UNORM_BLOCK:181,VK_FORMAT_ASTC_12x10_SRGB_BLOCK:182,VK_FORMAT_ASTC_12x12_UNORM_BLOCK:183,VK_FORMAT_ASTC_12x12_SRGB_BLOCK:184,VK_FORMAT_G8B8G8R8_422_UNORM:1000156e3,VK_FORMAT_B8G8R8G8_422_UNORM:1000156001,VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM:1000156002,VK_FORMAT_G8_B8R8_2PLANE_420_UNORM:1000156003,VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM:1000156004,VK_FORMAT_G8_B8R8_2PLANE_422_UNORM:1000156005,VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM:1000156006,VK_FORMAT_R10X6_UNORM_PACK16:1000156007,VK_FORMAT_R10X6G10X6_UNORM_2PACK16:1000156008,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16:1000156009,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16:1000156010,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16:1000156011,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16:1000156012,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16:1000156013,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16:1000156014,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16:1000156015,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16:1000156016,VK_FORMAT_R12X4_UNORM_PACK16:1000156017,VK_FORMAT_R12X4G12X4_UNORM_2PACK16:1000156018,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16:1000156019,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16:1000156020,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16:1000156021,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16:1000156022,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16:1000156023,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16:1000156024,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16:1000156025,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16:1000156026,VK_FORMAT_G16B16G16R16_422_UNORM:1000156027,VK_FORMAT_B16G16R16G16_422_UNORM:1000156028,VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM:1000156029,VK_FORMAT_G16_B16R16_2PLANE_420_UNORM:1000156030,VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM:1000156031,VK_FORMAT_G16_B16R16_2PLANE_422_UNORM:1000156032,VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM:1000156033,VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG:1000054e3,VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG:1000054001,VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG:1000054002,VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG:1000054003,VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG:1000054004,VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG:1000054005,VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG:1000054006,VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG:1000054007,VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT:1000066e3,VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT:1000066001,VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT:1000066002,VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT:1000066003,VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT:1000066004,VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT:1000066005,VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT:1000066006,VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT:1000066007,VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT:1000066008,VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT:1000066009,VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT:1000066010,VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT:1000066011,VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT:1000066012,VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT:1000066013,VK_FORMAT_G8B8G8R8_422_UNORM_KHR:1000156e3,VK_FORMAT_B8G8R8G8_422_UNORM_KHR:1000156001,VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM_KHR:1000156002,VK_FORMAT_G8_B8R8_2PLANE_420_UNORM_KHR:1000156003,VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM_KHR:1000156004,VK_FORMAT_G8_B8R8_2PLANE_422_UNORM_KHR:1000156005,VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM_KHR:1000156006,VK_FORMAT_R10X6_UNORM_PACK16_KHR:1000156007,VK_FORMAT_R10X6G10X6_UNORM_2PACK16_KHR:1000156008,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16_KHR:1000156009,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16_KHR:1000156010,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16_KHR:1000156011,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16_KHR:1000156012,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16_KHR:1000156013,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16_KHR:1000156014,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16_KHR:1000156015,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16_KHR:1000156016,VK_FORMAT_R12X4_UNORM_PACK16_KHR:1000156017,VK_FORMAT_R12X4G12X4_UNORM_2PACK16_KHR:1000156018,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16_KHR:1000156019,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16_KHR:1000156020,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16_KHR:1000156021,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16_KHR:1000156022,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16_KHR:1000156023,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16_KHR:1000156024,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16_KHR:1000156025,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16_KHR:1000156026,VK_FORMAT_G16B16G16R16_422_UNORM_KHR:1000156027,VK_FORMAT_B16G16R16G16_422_UNORM_KHR:1000156028,VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM_KHR:1000156029,VK_FORMAT_G16_B16R16_2PLANE_420_UNORM_KHR:1000156030,VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM_KHR:1000156031,VK_FORMAT_G16_B16R16_2PLANE_422_UNORM_KHR:1000156032,VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM_KHR:1000156033},Pe=Object.freeze(ir);var Ct=class{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}},Ae=class{constructor(u,r,B,O){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(u.buffer,u.byteOffset+r,B),this._littleEndian=O,this._offset=0}_nextUint8(){let u=this._dataView.getUint8(this._offset);return this._offset+=1,u}_nextUint16(){let u=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,u}_nextUint32(){let u=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,u}_nextUint64(){let u=this._dataView.getUint32(this._offset,this._littleEndian),r=this._dataView.getUint32(this._offset+4,this._littleEndian),B=u+2**32*r;return this._offset+=8,B}_nextInt32(){let u=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,u}_nextUint8Array(u){let r=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,u);return this._offset+=u,r}_skip(u){return this._offset+=u,this}_scan(u,r=0){let B=this._offset,O=0;for(;this._dataView.getUint8(this._offset)!==r&&O<u;)O++,this._offset++;return O<u&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+B,O)}};var Tr=new Uint8Array([0]),L=[171,75,84,88,32,50,48,187,13,10,26,10];function nn(T){return typeof TextDecoder<"u"?new TextDecoder().decode(T):Buffer.from(T).toString("utf8")}function _n(T){let u=new Uint8Array(T.buffer,T.byteOffset,L.length);if(u[0]!==L[0]||u[1]!==L[1]||u[2]!==L[2]||u[3]!==L[3]||u[4]!==L[4]||u[5]!==L[5]||u[6]!==L[6]||u[7]!==L[7]||u[8]!==L[8]||u[9]!==L[9]||u[10]!==L[10]||u[11]!==L[11])throw new Error("Missing KTX 2.0 identifier.");let r=new Ct,B=17*Uint32Array.BYTES_PER_ELEMENT,O=new Ae(T,L.length,B,!0);r.vkFormat=O._nextUint32(),r.typeSize=O._nextUint32(),r.pixelWidth=O._nextUint32(),r.pixelHeight=O._nextUint32(),r.pixelDepth=O._nextUint32(),r.layerCount=O._nextUint32(),r.faceCount=O._nextUint32();let h=O._nextUint32();r.supercompressionScheme=O._nextUint32();let K=O._nextUint32(),G=O._nextUint32(),x=O._nextUint32(),E=O._nextUint32(),C=O._nextUint64(),d=O._nextUint64(),V=h*3*8,Y=new Ae(T,L.length+B,V,!0);for(let U=0;U<h;U++)r.levels.push({levelData:new Uint8Array(T.buffer,T.byteOffset+Y._nextUint64(),Y._nextUint64()),uncompressedByteLength:Y._nextUint64()});let f=new Ae(T,K,G,!0),b={vendorId:f._skip(4)._nextUint16(),descriptorType:f._nextUint16(),versionNumber:f._nextUint16(),descriptorBlockSize:f._nextUint16(),colorModel:f._nextUint8(),colorPrimaries:f._nextUint8(),transferFunction:f._nextUint8(),flags:f._nextUint8(),texelBlockDimension:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],bytesPlane:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],samples:[]},z=6,ie=4,X=(b.descriptorBlockSize/4-z)/ie;for(let U=0;U<X;U++){let H={bitOffset:f._nextUint16(),bitLength:f._nextUint8(),channelType:f._nextUint8(),samplePosition:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};H.channelType&64?(H.sampleLower=f._nextInt32(),H.sampleUpper=f._nextInt32()):(H.sampleLower=f._nextUint32(),H.sampleUpper=f._nextUint32()),b.samples[U]=H}r.dataFormatDescriptor.length=0,r.dataFormatDescriptor.push(b);let q=new Ae(T,x,E,!0);for(;q._offset<E;){let U=q._nextUint32(),H=q._scan(U),ae=nn(H);if(r.keyValue[ae]=q._nextUint8Array(U-H.byteLength-1),ae.match(/^ktx/i)){let Ie=nn(r.keyValue[ae]);r.keyValue[ae]=Ie.substring(0,Ie.lastIndexOf("\0"))}let ot=U%4?4-U%4:0;q._skip(ot)}if(d<=0)return r;let g=new Ae(T,C,d,!0),Me=g._nextUint16(),_t=g._nextUint16(),Z=g._nextUint32(),Le=g._nextUint32(),me=g._nextUint32(),oe=g._nextUint32(),rt=[];for(let U=0;U<h;U++)rt.push({imageFlags:g._nextUint32(),rgbSliceByteOffset:g._nextUint32(),rgbSliceByteLength:g._nextUint32(),alphaSliceByteOffset:g._nextUint32(),alphaSliceByteLength:g._nextUint32()});let se=C+g._offset,Fe=se+Z,Ee=Fe+Le,de=Ee+me,be=new Uint8Array(T.buffer,T.byteOffset+se,Z),we=new Uint8Array(T.buffer,T.byteOffset+Fe,Le),De=new Uint8Array(T.buffer,T.byteOffset+Ee,me),it=new Uint8Array(T.buffer,T.byteOffset+de,oe);return r.globalData={endpointCount:Me,selectorCount:_t,imageDescs:rt,endpointsData:be,selectorsData:we,tablesData:De,extendedData:it},r}var on=rr(rn(),1),sn=["positiveX","negativeX","positiveY","negativeY","positiveZ","negativeZ"],an=163,Rn=166,Ne;function or(T,u){en.typeOf.object("transcoderModule",Ne);let r=T.ktx2Buffer,B=T.supportedTargetFormats,O;try{O=_n(r)}catch{throw new ne("Invalid KTX2 file.")}if(O.layerCount!==0)throw new ne("KTX2 texture arrays are not supported.");if(O.pixelDepth!==0)throw new ne("KTX2 3D textures are unsupported.");let h=O.dataFormatDescriptor[0],K=new Array(O.levelCount);return O.vkFormat===0&&(h.colorModel===an||h.colorModel===Rn)?ar(r,O,B,Ne,u,K):(u.push(r.buffer),sr(O,K)),K}function sr(T,u){let r=T.vkFormat===Pe.VK_FORMAT_R8G8B8_SRGB?v.RGB:v.RGBA,B;T.vkFormat===Pe.VK_FORMAT_R8G8B8A8_UNORM?B=Ke.UNSIGNED_BYTE:T.vkFormat===Pe.VK_FORMAT_R16G16B16A16_SFLOAT?B=Ke.HALF_FLOAT:T.vkFormat===Pe.VK_FORMAT_R32G32B32A32_SFLOAT&&(B=Ke.FLOAT);for(let O=0;O<T.levels.length;++O){let h={};u[O]=h;let K=T.levels[O].levelData,G=T.pixelWidth>>O,x=T.pixelHeight>>O,E=G*x*v.componentsLength(r);for(let C=0;C<T.faceCount;++C){let d=K.byteOffset+E*T.typeSize*C,V;!Ge(B)||Ke.sizeInBytes(B)===1?V=new Uint8Array(K.buffer,d,E):Ke.sizeInBytes(B)===2?V=new Uint16Array(K.buffer,d,E):V=new Float32Array(K.buffer,d,E),h[sn[C]]={internalFormat:r,datatype:B,width:G,height:x,levelBuffer:V}}}}function ar(T,u,r,B,O,h){let K=new B.KTX2File(T),G=K.getWidth(),x=K.getHeight(),E=K.getLevels(),C=K.getHasAlpha();if(!(G>0)||!(x>0)||!(E>0))throw K.close(),K.delete(),new ne("Invalid KTX2 file");let d,V,Y=u.dataFormatDescriptor[0],f=B.transcoder_texture_format;if(Y.colorModel===an)if(r.etc)d=C?v.RGBA8_ETC2_EAC:v.RGB8_ETC2,V=C?f.cTFETC2_RGBA:f.cTFETC1_RGB;else if(r.etc1&&!C)d=v.RGB_ETC1,V=f.cTFETC1_RGB;else if(r.s3tc)d=C?v.RGBA_DXT5:v.RGB_DXT1,V=C?f.cTFBC3_RGBA:f.cTFBC1_RGB;else if(r.pvrtc)d=C?v.RGBA_PVRTC_4BPPV1:v.RGB_PVRTC_4BPPV1,V=C?f.cTFPVRTC1_4_RGBA:f.cTFPVRTC1_4_RGB;else if(r.astc)d=v.RGBA_ASTC,V=f.cTFASTC_4x4_RGBA;else if(r.bc7)d=v.RGBA_BC7,V=f.cTFBC7_RGBA;else throw new ne("No transcoding format target available for ETC1S compressed ktx2.");else if(Y.colorModel===Rn)if(r.astc)d=v.RGBA_ASTC,V=f.cTFASTC_4x4_RGBA;else if(r.bc7)d=v.RGBA_BC7,V=f.cTFBC7_RGBA;else if(r.s3tc)d=C?v.RGBA_DXT5:v.RGB_DXT1,V=C?f.cTFBC3_RGBA:f.cTFBC1_RGB;else if(r.etc)d=C?v.RGBA8_ETC2_EAC:v.RGB8_ETC2,V=C?f.cTFETC2_RGBA:f.cTFETC1_RGB;else if(r.etc1&&!C)d=v.RGB_ETC1,V=f.cTFETC1_RGB;else if(r.pvrtc)d=C?v.RGBA_PVRTC_4BPPV1:v.RGB_PVRTC_4BPPV1,V=C?f.cTFPVRTC1_4_RGBA:f.cTFPVRTC1_4_RGB;else throw new ne("No transcoding format target available for UASTC compressed ktx2.");if(!K.startTranscoding())throw K.close(),K.delete(),new ne("startTranscoding() failed");for(let b=0;b<u.levels.length;++b){let z={};h[b]=z,G=u.pixelWidth>>b,x=u.pixelHeight>>b;let ie=K.getImageTranscodedSizeInBytes(b,0,0,V.value),X=new Uint8Array(ie),q=K.transcodeImage(X,b,0,0,V.value,0,-1,-1);if(!Ge(q))throw new ne("transcodeImage() failed.");O.push(X.buffer),z[sn[0]]={internalFormat:d,width:G,height:x,levelBuffer:X}}return K.close(),K.delete(),h}async function Rr(T,u){let r=T.webAssemblyConfig,B=tn(on.default,self.BASIS);return Ge(r.wasmBinaryFile)?Ne=await B(r):Ne=await B(),Ne.initializeBasis(),!0}function cr(T,u){let r=T.webAssemblyConfig;return Ge(r)?Rr(T,u):or(T,u)}var vr=Jt(cr);export{vr as default};
